!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ALBUMS_URL="/api/albums/",e.RANDOM_URL="/api/random/",e.TRACKS_URL="/api/tracks/"},function(t,e,r){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(function(){var t=window.AudioContext||window.webkitAudioContext;return t?(new t).sampleRate:44100})();!function(e){if(e){f=e,e.playlist=t,e.volume=50;var r,n,o;e.on("play",n=function(t,o,i){r&&r.disconnect(),r=new DGAuroraPlayer(AV.Player.fromURL(f.current.url),e),e.off("play",n)}),e.on("playlist",o=function(t,n,o){r&&(r.disconnect(),e.state="paused"),r=new DGAuroraPlayer(AV.Player.fromURL(f.current.url),e)})}}(DGPlayer(document.getElementById("dgplayer")))}function o(t,e){e?(0,c.fetchTrack)(t).then(function(e){a(e,t)}):u(t)}function i(t,e){e?(0,c.fetchAlbum)(t).then(function(t){t.tracks.forEach(function(e){a(e.id,t.artist,e.title,e.file,t.album,t.cover)})}):removeAlbumFromPlaylist(t)}function s(){(0,c.fetchRandom)().then(function(t){t.forEach(function(t){a(t.id,t.artist,t.title,t.file,t.album,t.cover)})})}function a(t,e,r,n,o,i){f.addSong={_id:t,name:e+" - "+r,url:encodeURI(n),artist:e,album:o,picture:encodeURI(i)}}function u(t){if(f){var e=f.playlist.find(function(e){return e._id===t}),r=f.playlist.indexOf(e);return r<0?void console.warn("NOTHING_TO_REMOVE"):void(f.removeSong=r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.createPlayer=n,e.trackToggle=o,e.albumToggle=i,e.randomAdd=s;var c=r(3),f={}},function(t,e){},function(t,e,r){"use strict";(function(t){function n(t){if(200!==t.status)throw new Error(t.url.split("/").slice(3).join("/")+">"+t.status+":"+t.statusText);return t}function o(){return t(""+a.RANDOM_URL).then(n).then(function(t){return t.json()}).catch(function(t){return console.error(t)})}function i(e){return t(""+a.ALBUMS_URL+e).then(n).then(function(t){return t.json()}).catch(function(t){return console.error(t)})}function s(e){return t(""+a.RANDOM_URL+e).then(n).then(function(t){return t.json()}).catch(function(t){return console.error(t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.fetchRandom=o,e.fetchAlbum=i,e.fetchTrack=s;var a=r(0)}).call(e,r(4))},function(t,e,r){(function(e){(function(){!function(){"use strict";function t(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function e(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){this.map={},t instanceof r?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function n(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function o(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function i(t){var e=new FileReader;return e.readAsArrayBuffer(t),o(e)}function s(t){var e=new FileReader;return e.readAsText(t),o(e)}function a(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(h.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(h.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!h.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},h.blob?(this.blob=function(){var t=n(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(i)},this.text=function(){var t=n(this);if(t)return t;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=n(this);return t?t:Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(t){var e=t.toUpperCase();return p.indexOf(e)>-1?e:t}function c(t,e){e=e||{};var n=e.body;if(c.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new r(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new r(e.headers)),this.method=u(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function l(t){var e=new r,n=t.getAllResponseHeaders().trim().split("\n");return n.forEach(function(t){var r=t.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();e.append(n,o)}),e}function d(t,e){e||(e={}),this._initBody(t),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof r?e.headers:new r(e.headers),this.url=e.url||""}if(!self.fetch){r.prototype.append=function(r,n){r=t(r),n=e(n);var o=this.map[r];o||(o=[],this.map[r]=o),o.push(n)},r.prototype.delete=function(e){delete this.map[t(e)]},r.prototype.get=function(e){var r=this.map[t(e)];return r?r[0]:null},r.prototype.getAll=function(e){return this.map[t(e)]||[]},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(r,n){this.map[t(r)]=[e(n)]},r.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){t.call(e,n,r,this)},this)},this)};var h={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self},p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this)},a.call(c.prototype),a.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},d.error=function(){var t=new d(null,{status:0,statusText:""});return t.type="error",t};var y=[301,302,303,307,308];d.redirect=function(t,e){if(y.indexOf(e)===-1)throw new RangeError("Invalid status code");return new d(null,{status:e,headers:{location:t}})},self.Headers=r,self.Request=c,self.Response=d,self.fetch=function(t,e){return new Promise(function(r,n){function o(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var i;i=c.prototype.isPrototypeOf(t)&&!e?t:new c(t,e);var s=new XMLHttpRequest;s.onload=function(){var t=1223===s.status?204:s.status;if(t<100||t>599)return void n(new TypeError("Network request failed"));var e={status:t,statusText:s.statusText,headers:l(s),url:o()},i="response"in s?s.response:s.responseText;r(new d(i,e))},s.onerror=function(){n(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials&&(s.withCredentials=!0),"responseType"in s&&h.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},self.fetch.polyfill=!0}}(),t.exports=e.fetch}).call(e)}).call(e,r(5))},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";function n(t){var e=t.target,r=(+e.dataset.id,o(e)),n=e.className.replace(/active/gi,"").trim();switch(n){case"add-album":(0,i.albumToggle)(albumId,r);break;case"add-random":(0,i.randomAdd)();break;case"add-track":(0,i.trackToggle)(trackId,r)}}function o(t){var e=Array.prototype.join.call(t.classList,"").match(/active/gi);return e?(t.classList.remove("active"),!1):(t.classList.add("active"),!0)}r(2);var i=(r(0),r(1));document.addEventListener("DOMContentLoaded",function(t){(0,i.createPlayer)(),document.addEventListener("click",function(t){n(t)})})}]);
//# sourceMappingURL=bundle.js.map